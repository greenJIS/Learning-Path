# Next.js 15 – Detailed Key Points

1. **Introduction to Next.js**

- React framework: routing, SSR, SSG, RSC, API routes.
- App Router (app/ folder) is the modern architecture.
- Hybrid full-stack: UI + server logic together.
- Performance optimizations built-in.

2. **Hello World**

- New Next project auto creates minimal app.
- `app/page.js` is default homepage.
- Every folder with `page.js` becomes a route.

3. **Project Structure**

- `app/` = routing system.
- `layout.js` = persistent UI wrapper.
- `page.js` = route endpoint.
- `loading.js` for suspense states.
- `error.js` for error boundaries.
- `route.js` for APIs.

4. **Before We Start**

- Default rendering = RSC.
- Client components must explicitly use `"use client"`.
- fetch() is server-side by default.

5. **Routing**

- Folder name maps directly to URL path.
- Simple and file-system driven.
- No router config file.

6. **Nested Routes**

- Nest folders to represent nested layouts & URLs.
- Path = folder structure.

7. **Dynamic Routes**

- `[id]` folders capture dynamic parameters.
- Params become available via `params`.

8. **Nested Dynamic Routes**

- Combine: `products/[id]/reviews/[reviewId]`.
- Nested params are merged.

9. **Catch-All Routes**

- `[...slug]` matches infinite depth.
- `[[...slug]]` makes optional segments.

10. **Custom 404 (`not-found.js`)**

- Dropped into any route level.
- Overrides default 404 only for that route.

11. **File Colocation**

- UI components, tests, utilities can live next to `page.js`.
- Only routing files matter: page, layout, loading, error, route.

12. **Private Folders**

- `_folder` means not part of routing.
- Useful for organizing internal code.

13. **Route Groups**

- `(groupName)` organizes files.
- Does not appear in URL.
- Allows multiple layouts under same URL path.

14. **Layouts**

- Wrap all pages inside folder.
- Common for navigation, wrappers, themes.
- One layout per level.

15. **Nested Layouts**

- Deeper routes inherit outer layouts.
- Stacked UI structure.

16. **Multiple Root Layouts**

- Using route groups:  
  Example: `(marketing)/layout.js` and `(dashboard)/layout.js` in one app.

17. **Metadata**

- Export `metadata` object per route.
- Automatic head tags generation.

18. **Title Metadata**

- Set per-page titles without `<Head>`.

19. **Link Component**

- `<Link>` adds preloading + client transitions.
- `<a>` is allowed but lacks optimizations.

20. **Active Links**

- Detect active route using `usePathname()`.
- Conditional CSS for navigation.

21. **params & searchParams**

- params = dynamic folder values.
- searchParams = query string via server component props.

22. **Programmatic Navigation**

- `useRouter()` works only in client components.
- `.push()`, `.replace()` for redirects.

23. **Templates**

- Like layouts but re-render on navigation.
- Useful for search filters, dashboards, etc.

24. **Loading UI**

- `loading.js`: automatically shows during fetch boundaries.
- No manual state management.

25. **Error Handling**

- `error.js` catches render & data-loading errors.
- Must be client component.

26. **Recovering from Errors**

- `reset()` function triggers re-render of segment.

27. **Nested Error Boundaries**

- Closest `error.js` overrides outer ones.

28. **Layout Errors**

- Errors inside layout affect all children.

29. **Global Errors**

- `app/global-error.js` catches errors not tied to a route.

30. **Parallel Routes**

- `@slot` folders:  
  Example: `app/@nav` and `app/@content`.
- Multiple independent UI regions.

31. **Unmatched Routes**

- `default.js` for when a slot has no matching route.

32. **Conditional Routes**

- Use loading conditions to show/hide route content.
- Useful for auth-based rendering.

33. **Intercepting Routes**

- Folder naming: `(.)`, `(..)`, `(...)`.
- Override presentation while preserving underlying context.
- Used in modals, overlays.

34. **Parallel Intercepting**

- Combine parallel and intercepting patterns for advanced UI flows.

35. **Route Handlers**

- `route.js` inside `api/` folder.
- Replaces legacy API routes.

36. **GET Request**

- `export function GET()` returns Response.

37. **POST Request**

- `POST()` for receiving form or JSON data.

38. **Dynamic Route Handlers**

- `[id]/route.js` provides dynamic API endpoints.

39. **PATCH Request**

- Partial updates to data.

40. **DELETE Request**

- Remove resource.

41. **URL Search Params (Route Handlers)**

- Extract query params via `URL(request.url)`.

42. **Headers**

- Access and set HTTP headers.

43. **Cookies**

- `cookies()` to read/write secure cookies server-side.

44. **Redirects (Route Handlers)**

- Safe server-side redirection with `redirect()`.

45. **Caching Behavior (Route Handlers)**

- `fetch()` caching strategies:
  - `force-cache` (static)
  - `no-store` (dynamic)
  - revalidate seconds

46. **Middleware**

- `middleware.js` runs on edge before route.
- Handles auth, rewrites, redirects.

47. **Rendering Modes**

- Static, dynamic, streaming, RSC, CSR.

48. **CSR (Client Components)**

- Required when:
  - event handlers
  - state
  - browser APIs

49. **SSR**

- Dynamic fetch triggers SSR.

50. **Suspense SSR**

- Streams UI progressively using `<Suspense>`.

51. **RSC (React Server Components)**

- No client JS.
- Direct data access.
- Reduced bundle size.

52. **Server vs Client Components**

- Server: data & heavy compute.
- Client: interactivity only.

53. **RSC Lifecycle**

- Fetch → render server → send HTML → hydrate client components only.

54. **Composition Patterns**

- Server can render client components as children.
- Client cannot import server modules.

55. **Static Rendering**

- Prebuilt at build time.
- Works with stable data.

56. **Dynamic Rendering**

- Requires on-demand fetch.

57. **generateStaticParams**

- Pre-generate routes for `[id]` dynamic paths.

58. **dynamicParams**

- Set `false` to restrict unknown params → triggers 404.

59. **Streaming**

- Faster time-to-first-byte with partial rendering.

60. **Advanced Composition Patterns**

- Complex nested RSC + client patterns for large apps.

61. **Server-only Code**

- Use `server-only` to prevent code from leaking to client bundle.

62. **Third-party Packages**

- Some require `"use client"` (charts, UI libs).
- Others can remain server-only (DB clients).

63. **Context Providers**

- Must wrap them inside a client component boundary.

64. **Client-only Code**

- Relegated to small components with interactivity.

65. **Client Component Placement**

- Push stateful components as far down as possible.

66. **Interleaving Components**

- Allowed: server → client → server.
- Client cannot import server logic.

67. **Data Fetching Overview**

- Server fetch preferred; cache by default.

68. **Client Data Fetching**

- For real-time or interactive data, use SWR.

69. **Server Data Fetching**

- Fetch at top-level in server components.
- No hooks required.

70. **Loading & Error UI Handling**

- Combine `loading.js`, `error.js`, and suspense boundaries.

71. **Sequential Data Fetching**

- `await` multiple fetches in order.

72. **Parallel Data Fetching**

- Use `Promise.all()` for performance.

73. **Database Fetching**

- Direct database access inside server components or route handlers.

74. **Data Mutations**

- Use Server Actions for backend logic.

75. **Server Actions in Forms**

- `action={myAction}` on `<form>` triggers server code.

76. **useFormStatus**

- Shows pending states during server actions.

77. **useActionState**

- Manages form state tied to server actions.

78. **Separated Server Actions**

- Keep action logic in dedicated server files for reusability.

79. **Update Action**

- Update database records server-side.

80. **Delete Action**

- Delete resources with actions instead of APIs.

81. **Optimistic Updates**

- `useOptimistic()` updates UI before server response.

82. **Form Components**

- Design reusable component-based form systems.

83. **Authentication (Clerk Setup)**

- Add Clerk provider in root layout.

84. **Sign In / Sign Out**

- Prebuilt Clerk components for auth flows.

85. **Profile Settings**

- Built-in user settings dashboard.

86. **Conditional UI (Auth)**

- Show/hide UI using `auth()`.

87. **Protected Routes**

- Middleware or server layouts check session.

88. **Reading Session & User Data**

- Access via `auth()` and server components.

89. **RBAC**

- Role checks using metadata in session.

90. **Customize Clerk Components**

- Override appearance via themes or CSS.

91. **Deployment**

- Vercel recommended; automatic RSC support.
- Environment variables control build/runtime.
