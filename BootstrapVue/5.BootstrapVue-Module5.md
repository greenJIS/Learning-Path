# Module 5 — Forms [⬆](./0.BootstrapVue-doc.md)

## Form Architecture in BootstrapVue

A form is **not** just inputs and a submit button.

A well-architected form:

- Has a **single source of truth** (state)
- Separates **UI** from **validation**
- Is accessible by default
- Can support async submission and errors

BootstrapVue supports this architecture, but does not enforce it — must be done explicitly.

### `<b-form>`: Why It Exists

```vue
<b-form @submit.prevent="onSubmit">
  <!-- form controls -->
</b-form>
```

`<b-form>`:

- Wraps native `<form>`
- Preserves browser semantics
- Integrates cleanly with Vue events

**Why `@submit.prevent` Is Mandatory**

Without .prevent:

- Browser reloads page
- SPA behavior breaks

### Form State Design (Very Important)

**❌ Bad Pattern (Scattered State)**

```vue
<b-form-input v-model="email" />
<b-form-input v-model="password" />
```

This becomes unmaintainable.

**✅ Correct Pattern (Single Object)**

```js
data() { return { form: { email: '', password: '' } } }
```

```vue
<b-form-input v-model="form.email" />
<b-form-input v-model="form.password" />
```

Benefits:

- Easy reset
- Easy validation
- Easy submission
- Scales to large forms

### Labels & Accessibility (Non-Negotiable)

**Correct Label Usage**

```vue
<b-form-group label="Email address" label-for="email-input">
  <b-form-input
    id="email-input"
    v-model="form.email"
    type="email"
  />
</b-form-group>
```

`<b-form-group>`:

- Connects label to input
- Handles spacing
- Improves screen-reader support

Labels should never be omited.

## Input Controls

### Text Inputs

```vue
<b-form-input v-model="form.name" placeholder="Enter your name" />
```

Key props:

- `type` (`text`, `email`, `password`, `number`)
- `placeholder`
- `disabled`
- `readonly`

### Textarea

```vue
<b-form-textarea v-model="form.message" rows="4" max-rows="8" />
```

Use `max-rows` for auto-expanding UX.

### Select Inputs

```vue
<b-form-select v-model="form.role" :options="roles" />
```

```js
roles: [
  { value: null, text: "Please select" },
  { value: "admin", text: "Admin" },
  { value: "user", text: "User" },
];
```

A null/default option should always be included.

### Checkboxes

**Single Checkbox**

```vue
<b-form-checkbox v-model="form.accepted">
  I accept the terms
</b-form-checkbox>
```

Boolean binding.

**Checkbox Group**

```vue
<b-form-checkbox-group v-model="form.skills" :options="skills" />
```

Produces an array.

### Radio Buttons

```vue
<b-form-radio-group v-model="form.gender" :options="genders" />
```

Radios used when **only one option is allowed**.

## Validation & Feedback

### Validation States

BootstrapVue uses **three states**:

- `null` → untouched
- `true` → valid
- `false` → invalid

```vue
<b-form-input v-model="form.email" :state="emailState" />
```

```js
computed: {
  emailState() {
    return this.form.email.length > 3 ? true : false
  }
}
```

### Feedback Messages

```vue
<b-form-invalid-feedback>
  Email is required.
</b-form-invalid-feedback>

<b-form-valid-feedback>
  Looks good!
</b-form-valid-feedback>
```

These show automatically based on **state**.

### Submit Flow (Correct Pattern)

```js
methods: {
  async onSubmit() {
    this.loading = true
    try {
      await api.submit(this.form)
      this.$bvToast.toast('Success!', { variant: 'success' })
    } catch (e) {
      this.$bvToast.toast('Error occurred', { variant: 'danger' })
    } finally {
      this.loading = false
    }
  }
}
```

This pattern:

- Prevents double submit
- Handles async safely
- Provides user feedback

### Server-Side Validation Errors

Best practice:

- Map server errors back to fields
- Do **not** rely only on client validation

```js
errors: {
  email: "Already taken";
}
```

Then display conditionally in feedback slots.
