# Module 11 — Forms & Validation [⬆](./0.BootstrapVue-doc.md)

## Form Architecture

The Three Layers of a Good Form:

1. **State** – the data
2. **Validation** – the rules
3. **Presentation** – the UI

Example (Conceptual)

```js
form = {
  email: "",
  password: "",
};

errors = {
  email: null,
  password: null,
};
```

UI reads from both, but does not own logic.

**Core Form Components**

| Component         | Purpose                 |
| ----------------- | ----------------------- |
| `b-form`          | Wrapper                 |
| `b-form-input`    | Text, email, password   |
| `b-form-textarea` | Long text               |
| `b-form-select`   | Dropdown                |
| `b-form-checkbox` | Boolean                 |
| `b-form-radio`    | Exclusive choice        |
| `b-form-group`    | Label + help + feedback |

Rule

> Always wrap inputs in `b-form-group`

### `b-form-group` (The Backbone)

`b-form-group` handles:

- Labels
- Help text
- Validation feedback
- Accessibility wiring

**Correct Usage**

```vue
<b-form-group
  label="Email"
  label-for="email"
  description="We'll never share your email."
>
  <b-form-input
    id="email"
    v-model="form.email"
    type="email"
  />
</b-form-group>
```

Never manually wire labels unless required.

### Validation States (The Correct Mental Model)

BootstrapVue uses **three validation states**:

| State   | Meaning   |
| ------- | --------- |
| `null`  | Untouched |
| `true`  | Valid     |
| `false` | Invalid   |

❌ Bad:

```js
isValid: false;
```

You show errors before user interaction.

✅ Good:

```js
isValid: null;
```

No feedback until user acts.

### Showing Validation Feedback

**Basic Validation Pattern**

```vue
<b-form-group
  label="Email"
  :state="emailState"
  invalid-feedback="Email is required"
>
  <b-form-input
    v-model="form.email"
    :state="emailState"
  />
</b-form-group>
```

**State Computation (Clean)**

```js
computed: {
  emailState() {
    if (!this.form.email) return null
    return this.form.email.includes('@')
  }
}
```

Never hardcode validation into the template.

### Submit Handling (Professional Pattern)

**Prevent Native Submission**

```vue
<b-form @submit.prevent="submit"></b-form>
```

Never allow uncontrolled submits.

**Submission Flow**

```js
submit() {
  if (!this.isFormValid) return
  // submit safely
}
```

Validation happens **before** API calls.

### Cross-Field Validation

Example: password confirmation.

**Pattern**

```js
computed: {
  passwordMatch() {
    if (!this.form.confirm) return null
    return this.form.password === this.form.confirm
  }
}
```

Bind `passwordMatch` to both inputs.

Avoid watchers unless absolutely required.

### Disabled, Readonly, and UX Integrity

**Disabled**

```vue
<b-form-input disabled />
```

Use for:

- System-controlled values
- Non-editable states

**Readonly**

```vue
<b-form-input readonly />
```

Use for:

- Review screens
- Copyable values

Do not confuse the two.

### Form Reset & Cleanup

**Reset Pattern**

```js
reset() {
  this.form = {
    email: '',
    password: ''
  }
}
```

Never partially reset state.

### Validation Strategy (Key Decisions)

**Client-Side** Validation Is For:

- Required fields
- Format checks
- Immediate feedback

**Server-Side** Validation Is For:

- Business rules
- Security
- Final authority

Never trust the client alone.
